## ЁЯза ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐ ржмржирж╛ржо ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо (Concurrency vs Parallelism) тАФ GoLang ржкрзНрж░рзЗржХрзНрж╖рж┐ржд

## рзз ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐ (Concurrency)

**рж╕ржВржЬрзНржЮрж╛:**
ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐ рж╣рж▓рзЛ ржПржоржи ржПржХржЯрж┐ ржХрзМрж╢рж▓ ржпрзЗржЦрж╛ржирзЗ ржПржХржЯрж┐ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо ржПржХржЗ рж╕ржорзЯрзЗ ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ **ржкрж░рж┐ржЪрж╛рж▓ржирж╛ (manage)** ржХрж░рждрзЗ ржкрж╛рж░рзЗред
ржПржЯрж┐ ржХрж╛ржЬржЧрзБрж▓рзЛржХрзЗ **ржЧржаржиржЧрждржнрж╛ржмрзЗ рж╕рж╛ржЬрж╛ржирзЛрж░ (structured design)** ржПржХржЯрж┐ ржкржжрзНржзрждрж┐ред

ржЕрж░рзНржерж╛рзО, ржкрзНрж░рзЛржЧрзНрж░рж╛ржо ржПржХрж╕рж╛ржерзЗ ржЕржирзЗржХ ржХрж╛ржЬ рж╢рзБрж░рзБ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржПржмржВ ржжрзНрж░рзБржд ржПржХржЯрж┐рж░ ржкрж░ ржПржХржЯрж┐ ржХрж╛ржЬ ржХрж░рзЗ (switch ржХрж░рзЗ) ржПржЧрж┐рзЯрзЗ ржирзЗрзЯред
ЁЯСЙ ржХрж╛ржЬржЧрзБрж▓рзЛ ржПржХржЗ ржорзБрж╣рзВрж░рзНрждрзЗ *ржЪрж▓ржЫрзЗржЗ ржПржоржи ржирзЯ*, ржмрж░ржВ CPU ржПржХржмрж╛рж░рзЗ ржПржХржЯрж┐ржХрзЗ ржЪрж╛рж▓рж┐рзЯрзЗ ржжрзНрж░рзБржд ржЕржирзНржпржЯрж┐рждрзЗ рж╕рзНржпрзБржЗржЪ ржХрж░ржЫрзЗред

---

### ЁЯзй ржЙржжрж╛рж╣рж░ржг (рж╕рж╣ржЬржнрж╛ржмрзЗ ржмрзБржЭрждрзЗ)

ржПржХржЬржи ржмрж╛ржмрзБрж░рзНржЪрж┐ (Chef) ржПржХрж╛ рж░рж╛ржирзНржирж╛ ржХрж░ржЫрзЗржи:

1. рждрж┐ржирж┐ рж╕рзНржпрзБржкржЯрж┐ ржирзЗрзЬрзЗ ржжрж┐рж▓рзЗржи,
2. рждрж╛рж░ржкрж░ рж╕рзЗржЯрж╛ ржлрзБржЯрждрзЗ ржжрж┐рзЯрзЗ рж╕ржмржЬрж┐ ржХрж╛ржЯрждрзЗ рж╢рзБрж░рзБ ржХрж░рж▓рзЗржи,
3. ржХрж┐ржЫрзБржХрзНрж╖ржг ржкрж░ ржЖржмрж╛рж░ рж╕рзНржпрзБржкржЯрж┐ ржирзЗрзЬрзЗ ржжрж┐рж▓рзЗржиред

ЁЯСЙ рждрж┐ржирж┐ ржПржХржмрж╛рж░рзЗ ржПржХржЯрж┐ ржХрж╛ржЬ ржХрж░ржЫрзЗржи, ржХрж┐ржирзНрждрзБ **ржжрзБржЯрж┐ ржХрж╛ржЬ ржХржиржХрж╛рж░рзЗржирзНржЯрж▓рж┐ ржорзНржпрж╛ржирзЗржЬ ржХрж░ржЫрзЗржи**ред
(ржПржХржЯрж┐ ржХрзЛрж░рзЗржЗ рж╕ржорзНржнржм, ржХрж╛рж░ржг CPU рж╢рзБржзрзБ context switch ржХрж░ржЫрзЗред)

---

### ЁЯза ржорзВрж▓ ржзрж╛рж░ржгрж╛

* ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐ = "ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ **ржПржХрж╕рж╛ржерзЗ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рж╛**"
* ржлрзЛржХрж╛рж╕: **Design / Structure**
* рж╕рж┐ржЩрзНржЧрзЗрж▓ ржХрзЛрж░рзЗржУ рж╕ржорзНржнржм
* ржХржиржХрж╛рж░рзЗржирзНржЯ ржХрзЛржб ржорж╛ржирзЗржЗ ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓ ржХрзЛржб ржирзЯ

---

## рзи ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо (Parallelism)

**рж╕ржВржЬрзНржЮрж╛:**
ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо рж╣рж▓рзЛ ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ **ржПржХржЗ ржорзБрж╣рзВрж░рзНрждрзЗ ржПржХрж╕рж╛ржерзЗ рж╕ржорзНржкрж╛ржжржи (execute)** ржХрж░рж╛ред
ржПржЯрж┐ ржХрж░рж╛рж░ ржЬржирзНржп **ржПржХрж╛ржзрж┐ржХ рж╕рж┐ржкрж┐ржЗржЙ ржХрзЛрж░** ржкрзНрж░рзЯрзЛржЬржиред

---

### ЁЯзй ржЙржжрж╛рж╣рж░ржг (ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг)

рж░рж╛ржирзНржирж╛ржШрж░рзЗ ржжрзБржЗржЬржи ржмрж╛ржмрзБрж░рзНржЪрж┐ ржЖржЫрзЗржи:

* ржкрзНрж░ржержоржЬржи рж╕рзНржпрзБржк ржирж╛рзЬржЫрзЗржи
* ржжрзНржмрж┐рждрзАрзЯржЬржи ржПржХржЗ рж╕ржорзЯрзЗ рж╕ржмржЬрж┐ ржХрж╛ржЯржЫрзЗржи
* ЁЯСЙ ржПржЦрж╛ржирзЗ ржжрзБржЯрж┐ ржХрж╛ржЬ ржПржХржЗ ржорзБрж╣рзВрж░рзНрждрзЗ *ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐* ржЪрж▓ржЫрзЗред

---

### ЁЯза ржорзВрж▓ ржзрж╛рж░ржгрж╛

* ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо = "ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ **ржПржХржЗ рж╕ржорзЯрзЗ рж╕ржорзНржкржирзНржи ржХрж░рж╛**"
* ржлрзЛржХрж╛рж╕: **Execution / Speed**
* ржПржХрж╛ржзрж┐ржХ ржХрзЛрж░ (multi-core CPU) ржЖржмрж╢рзНржпржХ
* ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐ ржерж╛ржХрж▓рзЗржЗ ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо ржирж╛ржУ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ, рждржмрзЗ ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржорзЗрж░ ржоржзрзНржпрзЗ ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐ ржЕржмрж╢рзНржпржЗ ржерж╛ржХрзЗред

---

## тЪЦя╕П рзй ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐ ржмржирж╛ржо ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо (ржорзВрж▓ ржкрж╛рж░рзНржержХрзНржп)

| ржмрзИрж╢рж┐рж╖рзНржЯрзНржп   | ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐ (Concurrency)                                    | ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо (Parallelism)                         |
| ----------- | ----------------------------------------------------------- | -------------------------------------------------- |
| рж╕ржВржЬрзНржЮрж╛      | ржПржХржЗ рж╕ржорзЯрзЗ ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рж╛ (Managing)                 | ржПржХржЗ ржорзБрж╣рзВрж░рзНрждрзЗ ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ рж╕ржорзНржкрж╛ржжржи ржХрж░рж╛ (Executing)    |
| рж▓ржХрзНрж╖рзНржп      | ржкрзНрж░рзЛржЧрзНрж░рж╛ржоржХрзЗ ржПржоржиржнрж╛ржмрзЗ рж╕рж╛ржЬрж╛ржирзЛ ржпрж╛рждрзЗ ржЕржирзЗржХ ржХрж╛ржЬ ржПржХрж╕рж╛ржерзЗ рж╕рж╛ржорж▓рж╛ржирзЛ ржпрж╛рзЯ | ржПржХрж╛ржзрж┐ржХ ржХрзЛрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорзЗрж░ ржЧрждрж┐ ржмрж╛рзЬрж╛ржирзЛ      |
| ржлрзЛржХрж╛рж╕       | Design / Structure                                          | Execution / Performance                            |
| ржмрж╛рж╕рзНрждржмрж╛рзЯржи   | ЁЯФеContext SwitchingЁЯФе (ржжрзНрж░рзБржд ржХрж╛ржЬ ржмржжрж▓рж╛ржирзЛ)                        | ржПржХржЗ рж╕ржорзЯрзЗ ржнрж┐ржирзНржи ржХрзЛрж░рзЗ ржХрж╛ржЬ ржЪрж╛рж▓рж╛ржирзЛ                     |
| ржкрзНрж░рзЯрзЛржЬржи     | Single Core рж╣рж▓рзЗржЗ ржЪрж▓рзЗ                                        | ЁЯФеMulti-CoreЁЯФе ржкрзНрж░рзЯрзЛржЬржи                                 |
| ржЙржжрж╛рж╣рж░ржг      | ржПржХржЬржи ржмрж╛ржмрзБрж░рзНржЪрж┐ ржжрзБржЯрж┐ ржХрж╛ржЬ ржЖржжрж▓ржмржжрж▓ ржХрж░рзЗ ржХрж░ржЫрзЗржи                     | ржжрзБржЗржЬржи ржмрж╛ржмрзБрж░рзНржЪрж┐ ржПржХрж╕рж╛ржерзЗ ржжрзБржЯрж┐ ржХрж╛ржЬ ржХрж░ржЫрзЗржи               |
| Go ржжрзГрж╖рзНржЯрж┐рждрзЗ | ржЕржирзЗржХржЧрзБрж▓рзЛ goroutine ржЪрж╛рж▓рж╛ржирзЛ                                   | Go scheduler goroutine ржЧрзБрж▓рзЛржХрзЗ ржПржХрж╛ржзрж┐ржХ ржХрзЛрж░рзЗ ржнрж╛ржЧ ржХрж░ржЫрзЗ |

> ЁЯТб **рж╕ржВржХрзНрж╖рзЗржкрзЗ:**
> ЁЯзй ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐ рж╣рж▓рзЛ ржбрж┐ржЬрж╛ржЗржи ржЖржЗржбрж┐рзЯрж╛ (structure)ред
> тЪЩя╕П ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо рж╣рж▓рзЛ рж╕рзЗржЗ ржбрж┐ржЬрж╛ржЗржирзЗрж░ ржмрж╛рж╕рзНрждржмрж╛рзЯржи (execution) тАФ ржпржЦржи ржПржХрж╛ржзрж┐ржХ ржХрзЛрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред

---

## ЁЯМА рзк Go (Golang) ржХрзАржнрж╛ржмрзЗ ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐ ржУ ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗ?

Go Language ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐рж░ ржЬржирзНржпржЗ ржбрж┐ржЬрж╛ржЗржи ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ, ржПржмржВ ржПрж░ ржнрзЗрждрж░рзЗ ржПржоржи runtime ржЖржЫрзЗ ржпрж╛ ржПржХрзЗ рж╕рж╣ржЬрзЗ parallel ржХрж░рждрзЗ ржкрж╛рж░рзЗред

---

### ржХ. ЁЯз╡ Goroutines тАФ ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐рж░ ржорзВрж▓ ржнрж┐рждрзНрждрж┐

* Goroutine рж╣рж▓рзЛ Go-ржПрж░ ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐рж░ ржорзВрж▓ ржЕрж╕рзНрждрзНрж░ред ржПржЯрж┐ ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи ржпрж╛ ржЕржирзНржпрж╛ржирзНржп ржлрж╛ржВрж╢ржирзЗрж░ ржкрж╛рж╢рж╛ржкрж╛рж╢рж┐ ржЪрж▓рждрзЗ ржкрж╛рж░рзЗред
* Goroutine рж╣рж▓рзЛ **Go-ржПрж░ lightweight thread**ред ржПржЧрзБрж▓рзЛ ржЕржкрж╛рж░рзЗржЯрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржерзНрж░рзЗржбрзЗрж░ ржЪрзЗрзЯрзЗ ржЕржирзЗржХ ржХржо ржорзЗржорж░рж┐ ржирзЗрзЯ, рждрж╛ржЗ ржЖржкржирж┐ ржПржХржЯрж┐ Go ржкрзНрж░рзЛржЧрзНрж░рж╛ржорзЗ рж▓ржХрзНрж╖ рж▓ржХрзНрж╖ ржЧрзЛрж░рзБржЯрж┐ржи ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░ржмрзЗржиред
* ржкрзНрж░рждрж┐ржЯрж┐ goroutine рж╢рзБрж░рзБрждрзЗ ржкрзНрж░рж╛рзЯ **2KB stack memory** ржирзЗрзЯ тАФ OS ржерзНрж░рзЗржбрзЗрж░ рждрзБрж▓ржирж╛рзЯ ржЕрждрж┐ ржХрзНрж╖рзБржжрзНрж░ред
* `go` ржХрзАржУрзЯрж╛рж░рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржпрзЗржХрзЛржирзЛ ржлрж╛ржВрж╢ржиржХрзЗ goroutine рж╣рж┐рж╕рзЗржмрзЗ ржЪрж╛рж▓рж╛ржирзЛ ржпрж╛рзЯред
* Go runtime ржирж┐ржЬрзЗржЗ ржПржЧрзБрж▓рзЛ ржорзНржпрж╛ржирзЗржЬ ржХрж░рзЗ, рждрж╛ржЗ ржЖржкржирж┐ рж╕рж╣ржЬрзЗржЗ **рж╣рж╛ржЬрж╛рж░ ржмрж╛ рж▓ржХрзНрж╖рж╛ржзрж┐ржХ goroutine** ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░ржмрзЗржиред


**ржЙржжрж╛рж╣рж░ржг:**

```go
package main

import (
    "fmt"
    "time"
)

func cookSoup() {
    for i := 0; i < 5; i++ {
        fmt.Println("ЁЯег Cooking soup...", i)
        time.Sleep(time.Millisecond * 500)
        // Each iteration waits 500 milliseconds before continuing
    }
}

func chopVeg() {
    for i := 0; i < 5; i++ {
        fmt.Println("ЁЯФк Chopping vegetables...", i)
        time.Sleep(time.Millisecond * 400)
        // Each iteration waits 400 milliseconds before continuing
    }
}

func main() {
    // run concurrently
    // context switching
    // youтАЩre starting a goroutine (a lightweight concurrent thread)
    go cookSoup()   

    // run concurrently
    // context switching
    // youтАЩre starting a goroutine (a lightweight concurrent thread)
    go chopVeg()

    // So now both functions start running concurrently, in separate goroutines.

    time.Sleep(time.Second * 3)
    fmt.Println("тЬЕ All tasks managed concurrently!")
}
```

ЁЯСЙ ржПржЗ ржХрзЛржбрзЗ ржжрзБржЯрж┐ ржлрж╛ржВрж╢ржи ржПржХржЗрж╕рж╛ржерзЗ ржЪрж▓рждрзЗ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗ тАФ ржПржЯрж┐ ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐ред

### ЁЯзй main() function

```go
func main() {
    go cookSoup()   // run concurrently
    go chopVeg()    // run concurrently

    time.Sleep(time.Second * 3)
    fmt.Println("тЬЕ All tasks managed concurrently!")
}
```

HereтАЩs the key:

* When you write `go cookSoup()` тЖТ youтАЩre **starting a goroutine** (a lightweight concurrent thread).
* Same for `go chopVeg()`.

So now both functions start running **concurrently**, in separate goroutines.

---

### ЁЯХР Why you need `time.Sleep()` in `main()`

If you **remove** this line:

```go
time.Sleep(time.Second * 3)
```

Then the main function **finishes immediately** тАФ and your **program exits** before goroutines can print anything.

ЁЯСЙ **Reason:**
When the `main()` function ends, the **entire Go program stops**, even if goroutines are still running.

So the goroutines (`cookSoup` and `chopVeg`) are killed before they have a chance to output anything.

ThatтАЩs why you donтАЩt see any output if you remove the `Sleep()` in `main`.

тЬЕ Better way than Sleep()

Using time.Sleep just to keep the main function alive isnтАЩt ideal.
A more professional and controlled way is to use a sync.WaitGroup.

---

### ржЦ. ЁЯФД Channels тАФ ржирж┐рж░рж╛ржкржж ржпрзЛржЧрж╛ржпрзЛржЧ ржмрзНржпржмрж╕рзНржерж╛

Goroutine ржЧрзБрж▓рзЛ рж╕рзНржмрж╛ржзрзАржиржнрж╛ржмрзЗ ржЪрж▓рзЗ, рждрж╛ржЗ рждрж╛ржжрзЗрж░ ржоржзрзНржпрзЗ рждржерзНржп ржЖржжрж╛ржи-ржкрзНрж░ржжрж╛ржи ржмрж╛ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬрзЗрж╢ржирзЗрж░ (Sync) ржЬржирзНржп ржжрж░ржХрж╛рж░ рж╣рзЯ ржПржХржЯрж┐ **safe communication mechanism**ред

**Channel** рж╣ржЪрзНржЫрзЗ рж╕рзЗржЗ ржирж┐рж░рж╛ржкржж ржкрж╛ржЗржкрж▓рж╛ржЗржи, ржпрзЗржЦрж╛ржирзЗ:

* ржПржХ Goroutine рждржерзНржп ржкрж╛ржарж╛рзЯ (`chan <-`)
* ржЕржирзНржп Goroutine рждржерзНржп ржЧрзНрж░рж╣ржг ржХрж░рзЗ (`<- chan`)

**channel** ржжрж┐рзЯрзЗ ржЧрзЛрж░рзБржЯрж┐ржиржЧрзБрж▓рзЛ ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ "ржХржерж╛ ржмрж▓рзЗ"ред

**ржЙржжрж╛рж╣рж░ржг:**

```go
package main

import "fmt"

func worker(ch chan string) {
    msg := <-ch
    fmt.Println("ЁЯУе Received:", msg)
}

func main() {
    ch := make(chan string)
    go worker(ch)
    ch <- "Hello from main goroutine!"
}
```

ЁЯСЙ Channels ржбрзЗржЯрж╛ рж░рзЗрж╕ (data race) ржПрзЬрж╛рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ ржПржмржВ ржХржиржХрж╛рж░рзЗржирзНржЯ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорзЗрж░ рж╕рж╛ржзрж╛рж░ржг рж╕ржорж╕рзНржпрж╛ржЧрзБрж▓рзЛ ржПрзЬрж╛рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ ржПржмржВ ржХрзЛржбржХрзЗ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ рж░рж╛ржЦрзЗред

---

### ржЧ. тЪЩя╕П Go Runtime Scheduler - ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржорзЗрж░ ржЬржирзНржп
* Go-ржПрж░ ржнрзЗрждрж░рзЗ ржПржХржЯрж┐ "ржорзНржпрж╛ржирзЗржЬрж╛рж░" (ржпрж╛ржХрзЗ Runtime Scheduler ржмрж▓рзЗ) ржЖржЫрзЗред
* ржЖржкржирж┐ ржпржЦржи ржЕржирзЗржХржЧрзБрж▓рзЛ ржЧрзЛрж░рзБржЯрж┐ржи (ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐) ржЪрж╛рж▓рзБ ржХрж░рзЗржи, ржПржЗ ржорзНржпрж╛ржирзЗржЬрж╛рж░ржЯрж┐ ржЖржкржирж╛рж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗ ржпрждржЧрзБрж▓рзЛ рж╕рж┐ржкрж┐ржЗржЙ ржХрзЛрж░ (ржпрзЗржоржи: рзкржЯрж┐, рзоржЯрж┐) ржЖржЫрзЗ, рж╕рзЗржЧрзБрж▓рзЛрж░ ржУржкрж░ ржЧрзЛрж░рзБржЯрж┐ржиржЧрзБрж▓рзЛржХрзЗ ржнрж╛ржЧ ржХрж░рзЗ ржжрзЗрзЯред
* ржлрж▓рзЗ, ржЖржкржирж╛рж░ ржпржжрж┐ рзкржЯрж┐ ржХрзЛрж░ ржерж╛ржХрзЗ, Go ржПржХржЗ рж╕ржорзЯрзЗ рзкржЯрж┐ ржЧрзЛрж░рзБржЯрж┐ржиржХрзЗ *ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐* (ржПржХржЗ ржорзБрж╣рзВрж░рзНрждрзЗ) ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рзЗред

* ржПржЗ scheduler **M:N ржоржбрзЗрж▓** ржЕржирзБрж╕рж░ржг ржХрж░рзЗ:

  * M = OS ржерзНрж░рзЗржб
  * N = Goroutines
  * Scheduler goroutine ржЧрзБрж▓рзЛржХрзЗ available OS thread-ржП ржорзНржпрж╛ржк ржХрж░рзЗред

**ржорзВрж▓ ржирж┐рзЯржирзНрждрзНрж░ржг ржлрж╛ржВрж╢ржи:**

```go
import "runtime"

runtime.GOMAXPROCS(n) // n рж╕ржВржЦрзНржпржХ CPU ржХрзЛрж░ ржмрзНржпржмрж╣рж╛рж░ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ
```

ржпржжрж┐ `runtime.GOMAXPROCS(runtime.NumCPU())` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ,
рждржмрзЗ Go runtime рж╕ржм ржХрзЛрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ тАФ ржЕрж░рзНржерж╛рзО **Parallel Execution** рж╣рзЯред

---

**рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк:** тЭдя╕П ржЖржкржирж┐ Go-рждрзЗ **ржЧрзЛрж░рзБржЯрж┐ржи** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ *ржХржиржХрж╛рж░рзЗржирзНржЯ* ржХрзЛржб рж▓рзЗржЦрзЗржи, ржЖрж░ Go-ржПрж░ **рж░рж╛ржиржЯрж╛ржЗржо рж╕рж┐ржбрж┐ржЙрж▓рж╛рж░** рж╕рзЗржЗ ржХрзЛржбржХрзЗ ржПржХрж╛ржзрж┐ржХ рж╕рж┐ржкрж┐ржЗржЙ ржХрзЛрж░рзЗ ржЫрзЬрж┐рзЯрзЗ ржжрж┐рзЯрзЗ *ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо* ржЕрж░рзНржЬржи ржХрж░рзЗред тЭдя╕П

## ЁЯзй рзля╕П рж╕рж╛ржзрж╛рж░ржг ржнрзБрж▓ ржзрж╛рж░ржгрж╛

| ржнрзБрж▓ ржзрж╛рж░ржгрж╛                           | ржмрж╛рж╕рзНрждржмрждрж╛                                                                                             |
| ----------------------------------- | ---------------------------------------------------------------------------------------------------- |
| Go inherently parallel              | ржирж╛, Go inherently **concurrent**ред Parallel execution ржирж┐рж░рзНржнрж░ ржХрж░рзЗ CPU ржХрзЛрж░рзЗрж░ рж╕ржВржЦрзНржпрж╛ ржУ scheduler-ржПрж░ ржУржкрж░ред |
| рж╕ржм goroutine ржПржХрж╕рж╛ржерзЗ ржЪрж▓рзЗ             | ржирж╛, scheduler рж╕ржорзЯ ржнрж╛ржЧ ржХрж░рзЗ ржжрзЗрзЯ (context switch ржХрж░рзЗ)ред                                                  |
| Channel ржЫрж╛рзЬрж╛ concurrency ржХрж░рж╛ ржпрж╛рзЯ ржирж╛ | рж╕ржорзНржнржм, рждржмрзЗ channels ржХрзЛржбржХрзЗ ржирж┐рж░рж╛ржкржж ржУ ржкрж░рж┐рж╖рзНржХрж╛рж░ рж░рж╛ржЦрзЗред                                                    |

---

## ЁЯзн рзмя╕П рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк

| ржмрж┐рж╖рзЯ              | ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐                   | ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо                |
| ----------------- | ---------------------------- | --------------------------- |
| ржорж╛ржирзЗ              | ржПржХржЗ рж╕ржорзЯрзЗ ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ manage | ржПржХржЗ рж╕ржорзЯрзЗ ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ execute |
| Go-рждрзЗ ржорж╛ржзрзНржпржо      | Goroutine                    | Runtime Scheduler           |
| ржпрзЛржЧрж╛ржпрзЛржЧ           | Channels                     | Shared memory ржмрж╛ channels   |
| ржкрзНрж░рзЯрзЛржЬржирзАрзЯ CPU ржХрзЛрж░ | рззржЯрж┐ рж╣рж▓рзЗржЗ ржЪрж▓рзЗ                 | рзи ржмрж╛ рждрж╛рж░ ржмрзЗрж╢рж┐ ржХрзЛрж░ ржкрзНрж░рзЯрзЛржЬржи   |
| ржлрзЛржХрж╛рж╕       | Design / Structure                | Execution / Performance       |

> ЁЯЧгя╕П тАЬConcurrency is about **dealing** with lots of things at once.
> Parallelism is about **doing** lots of things at once.тАЭ
> тАФ *Rob Pike (Go-ржПрж░ рж╕рж╣-ржирж┐рж░рзНржорж╛рждрж╛)*

---

## ЁЯЪА рзн ржмрж╛рж╕рзНрждржм ржкрзНрж░рзЯрзЛржЧ

* **Concurrency:**

  * ржУрзЯрзЗржм рж╕рж╛рж░рзНржнрж╛рж░ ржпрзЗржЦрж╛ржирзЗ ржЕржирзЗржХ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржХрж╕рж╛ржерзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржЫрзЗред
  * ржбрзЗржЯрж╛ рж╕рзНржЯрзНрж░рж┐ржо ржкрзНрж░рж╕рзЗрж╕рж┐ржВред
* **Parallelism:**

  * CPU-ржмрж╛ржЙржирзНржб ржХрж╛ржЬ (ржпрзЗржоржи: ржЗржорзЗржЬ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ, ржмрзЬ ржХржорзНржкрж┐ржЙржЯрзЗрж╢ржи)
  * ржбрзЗржЯрж╛ ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓ ржЯрж╛рж╕рзНржХ (MapReduce, Matrix Multiplication ржЗрждрзНржпрж╛ржжрж┐)

---

## ЁЯУШ рзоя╕П рж╕ржВржХрзНрж╖рж┐ржкрзНржд рж░рж┐ржХрзНржпрж╛ржк

| ржмрж┐рж╖рзЯ                | ржорзВрж▓ ржкрзЯрзЗржирзНржЯ                       |
| ------------------- | -------------------------------- |
| ржХржиржХрж╛рж░рзЗржирзНрж╕рж┐          | ржбрж┐ржЬрж╛ржЗржи ржХрзМрж╢рж▓ (ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ рж╕рж╛ржорж▓рж╛ржирзЛ) |
| ржкрзНржпрж╛рж░рж╛рж▓рж╛рж▓рж┐рж╕ржо        | ржПржХрж╛ржзрж┐ржХ ржХрзЛрж░рзЗ ржПржХрж╕рж╛ржерзЗ ржЪрж╛рж▓рж╛ржирзЛ        |
| Go concurrency ржЯрзБрж▓  | Goroutines + Channels            |
| Parallelism control | Runtime Scheduler + GOMAXPROCS   |
| ржорзВрж▓ ржЙржХрзНрждрж┐           | тАЬConcurrency тЙа ParallelismтАЭ      |

---
